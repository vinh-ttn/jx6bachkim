-- ÁúÈª´å¡¡Â·ÈË¡¡ÆİÔÊÕæ
-- by£ºDan_Deng(2003-09-16)
-- Îå¶¾½Ì90¼¶ÈÎÎñ
-- update by xiaoyang(2004\4\13)

Include("\\script\\global\\repute_head.lua")

Include("\\script\\item\\skillbook.lua")

function main()
	Uworld124 = GetTask(124)
	Uworld37 = GetByte(GetTask(37),2)
	if(Uworld124 < 10) and (GetLevel() >= 90) and (GetReputeLevel(GetRepute()) >= 5) and (Uworld37 == 127) and (GetFaction() ~= "wudu") then
		Talk(6,"Uworld_wuget","LTT4ÔÚÁúÈª¼ûµ½ÆİÔÊÕæ,Äã¼ûµ½ÆİÔÊÕæ·¢ÏÖËûÃæÃ²Ææ¹Ö. ¿´µ½Õâ¸öÈËÁ³ÉÏ¼¡Èâ¹ÖÒìµÄÅ¤Çú×Å£¬·Â·ğ±ï³öÀ´µÄÀäĞ¦½©Ó²µÄ¹ÒÔÚÁ³ÉÏ¡£","ÕâÎ»´ó¸ç!Óöµ½Ê²Ã´²»¿ªĞÄµÄÊÂÇéÁËÂğ?","ºÇºÇ£¡ÅóÓÑ¿ìÈ¥°É£¡ºÇºÇ£¡","ÎÒ¼ûÄãÃæÉ«·¢Çà,È«Éí³é´¤,ÊÇÖĞ¶¾ÁËÂğ?","ÒÑ¾­±»ÄãÈÏ³öÀ´ÁËÎÒÒ²²»ÒşÂ÷ÁË¡£ÎÒÖĞÁËÒõÑôĞ¦µÄÒõºİ¶¾Ò©,ÏÖÔÚÃ¿¸ô3Ğ¡Ê±¾Í·¢×÷Ò»´Î£¬Ğ¦µ½È«Éí·¢½©£¬ÄĞÅ®²»·Ö£¬Ñù×Ó¹ÖÒì£¬ĞóÎï¶¼²»¸Ò¿¿½ü¡£Ğ¦µ½È«Éí¸É¿İ£¬Éú²»ÈçËÀ","ÊÇË­ÓÃÕâÖÖÆæ¶¾º¦Äã?")
	elseif(Uworld124 == 40) and (HaveItem(387) == 1) then
		Talk(5,"Uworld_wufinish","LTT5ÍşĞÖ½âÒ©ÔÚÕâ£¬¸Ï¿ì·şÏÂ!","ÍÛ! Êæ·ş¶àÁË!¶àĞ»´óÏÀ¾ÈÃü.ÍşÄ³×öÅ£×öÂíÒ²ÎŞ·¨±¨´ğ! ","³Í¼é³ı¶ñÊÇĞĞÏÀ½­ºşµÄÈËµÄ±¾·Ö¡£²»±ØÁôĞÄ£¡","ÏÖÔÚÈËĞÄØÏ²â. ÏñĞÖÌ¨ÕâÑùÓĞÏÀÒåµÄÈË¸üÊÇÉÙ¼û. ²»Â÷ÄãËµ, ÎÒÕıÊÇÎå¶¾½ÌµÜ×Ó, ¶ñÈËµÄ°ïĞ×. ×îºó±»ÔÆÀÏ°ÑÎÒ±ä³ÉÁËÊÔ¶¾¹¤¾ß. ÈËÉú°Ù¿àÒÑ¾­³¢¾¡ÁË¡£","ÀË×Ó»ØÍ·½ğ²»»»£¬Ï£ÍûÄãÒÔºó¿ÉÒÔÓÃ´È±¯ĞÄ³¦¶Ô´ıÊÀÈË","´óÏÀ·ÅĞÄ£¡¾­¹ıÕâ¼şÊÂ£¬ÎÒÔÙÒ²²»»áÓĞº¦ÈËÖ®ĞÄÁË")
	elseif(Uworld124 > 10) and (Uworld124 < 40) then
		Talk(1,"","ºLTT6ÇºÇ")
	else
		Talk(1,"","LTT7ÄãÌı¹ıÉ½ºÓÉçğ¢Í¼Âğ£¿ÕæÓĞÕâ¸öµØÍ¼Âğ£¿Èç¹ûÓĞËüÔÚÊÖÄÇÃ´ÈÙ»ª¸»¹ó½«»áÏí²»¾¡")
	end
end

function Uworld_wuget()
	if (GetCamp() == 0) and (GetTask(75) < 255) then		-- °×ÃûÎ´Ñ§Ò°ÇòÈ­µÄ£¬²»ÔÊĞí½ÓÈÎÎñ
		Talk(1,"","ºLTT8ÇºÇ. ¿´Ñù×ÓÈ¥Ò²²»ÄÜÄãÁË£¬Ëµ³öÕâ¼şÊÂÓĞÊ²Ã´ºÃ´¦£¬ËãÁË¡£ºÇºÇ¡£")
	else
		Say("LTT9Îå¶¾½Ì, ÔÆ²»Ğ°",2,"ÄãµÈÏÂ, ÎÒÒªÈÃÄãÖªµÀÊ²Ã´ÊÇÕıµÀ/Uworld_wduok","ÔÆ²»Ğ°Ò½Ò»ÉúÓÃ¶¾£¬ÎÒ²»ÏëÖÃÄãÓÚËÀµØ£¬ÄãºÃ×ÔÎªÖ®/Uworld_wduno")
	end
end

function Uworld_wduok()
	SetTask(124,10)
	Msg2Player("LTT10´ğÓ¦ÆİÔÊÕæ£¬È¥ÕÒÔÆ²»Ğ°ÄÃÒõÑôĞ¦µÄ½âÒ©")
	AddNote("´ğÓ¦ÆİÔÊÕæ£¬È¥ÕÒÔÆ²»Ğ°ÄÃÒõÑôĞ¦µÄ½âÒ©")
end

function Uworld_wduno()
end

function Uworld_wufinish()
	DelItem(387)
	if (GetTask(10) >= 70*256) and (GetTask(10) ~= 75*256) then				-- ÊÇÎå¶¾³öÊ¦µÄ£¬¿ÉÒÔÑ§µ½¼¼ÄÜ
		Talk(2,"","LTT11ÕâÀïÓĞÒ»¾íÎå¶¾½ÌµÄÃØÒ©¾­£¬ËÍ¸ø´óÏÀ£¬¸æ´Ç","ÕâÑùÄãÒ²¾Í²»±Ø¿ÍÆø£¡ÎÒÑĞ¾¿Ò»ÏÂÕâ¾íÃØ¾­£¬¿´ÄÜ·ñ½â¾ÈÌìÏÂ")
		if (HaveMagic(353) == -1) then		-- ±ØĞëÃ»ÓĞ¼¼ÄÜµÄ²Å¸ø¼¼ÄÜ
			AddMagic(353,1)
		end
		if (HaveMagic(355) == -1) then		-- ±ØĞëÃ»ÓĞ¼¼ÄÜµÄ²Å¸ø¼¼ÄÜ
			AddMagic(355,1)
		end
		if (HaveMagic(390) == -1) then		-- ±ØĞëÃ»ÓĞ¼¼ÄÜµÄ²Å¸ø¼¼ÄÜ
			AddMagic(390)
		end
		CheckIsCanGet150SkillTask()
		Msg2Player("LTT12Ñ§µ½¼¼ÄÜ:ÒõÑôÊ´¹Ç,ĞşÒõÕ¶,¶Ï½î¸¯¹Ç")
		SetTask(124,255)
	else
		SetTask(124,245)								--»ñµÃÉùÍûµÄÉèÖÃ±äÁ¿245
	end
   add_repute = ReturnRepute(30,100,4)			-- ÉùÍû½±Àø£º×î´ó30µã£¬´Ó100¼¶ÆğÃ¿¼¶µİ¼õ4%
   AddRepute(add_repute)
   Msg2Player("LTT13¸øÆİÔÊÕæ´øÀ´½âÒ©£¬Íê³ÉÈÎÎñ£¬ÃûÍûÔö¼Ó"..add_repute.."µã.")
   AddNote("¸øÆİÔÊÕæ´øÀ´½âÒ©£¬Íê³ÉÈÎÎñ")
end
